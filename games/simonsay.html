<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simon Says Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
}

body {
    min-height: 100vh;
    background: url("images/simon.jpeg") center/cover no-repeat;
    display: flex;
    justify-content: center;
    align-items: center;
}

body::before {
    content: "";
    position: fixed;
    inset: 0;
    backdrop-filter: blur(14px);
    background: rgba(0,0,0,0.65);
    z-index: -1;
}

/* MAIN CARD */
.game {
    width: 380px;
    padding: 30px;
    border-radius: 25px;
    background: rgba(255,255,255,0.1);
    box-shadow: 0 30px 80px rgba(0,0,0,0.6);
    color: white;
    text-align: center;
}

/* HEADER */
h1 {
    font-size: 30px;
    letter-spacing: 2px;
}

.info {
    display: flex;
    justify-content: space-between;
    margin: 15px 0;
    font-size: 14px;
    opacity: 0.9;
}

/* BOARD */
.board {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
    margin: 25px 0;
}

/* BUTTONS */
.pad {
    height: 140px;
    border-radius: 18px;
    cursor: pointer;
    transition: all 0.15s ease;
    box-shadow: inset 0 0 0 rgba(255,255,255,0);
}

.green { background: #1ed760; }
.red { background: #ff4b5c; }
.yellow { background: #f5c542; }
.blue { background: #4aa3ff; }

/* ACTIVE */
.pad.active {
    transform: scale(1.08);
    filter: brightness(160%);
    box-shadow: 0 0 35px currentColor;
}

/* START */
#start {
    padding: 12px 35px;
    border-radius: 40px;
    border: none;
    background: linear-gradient(135deg,#fff,#ddd);
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

#start:hover {
    transform: scale(1.1);
}

/* SHAKE */
.shake {
    animation: shake 0.3s linear;
}

@keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    50% { transform: translateX(8px); }
    75% { transform: translateX(-8px); }
    100% { transform: translateX(0); }
}
</style>
</head>

<body>

<div class="game" id="game">
    <h1>SIMON SAYS</h1>

    <div class="info">
        <span id="level">Level: 0</span>
        <span id="score">Score: 0</span>
        <span id="best">Best: 0</span>
    </div>

    <div class="board">
        <div class="pad green" data-color="green"></div>
        <div class="pad red" data-color="red"></div>
        <div class="pad yellow" data-color="yellow"></div>
        <div class="pad blue" data-color="blue"></div>
    </div>

    <button id="start">START</button>
</div>

<script>
const pads = document.querySelectorAll(".pad");
const levelText = document.getElementById("level");
const scoreText = document.getElementById("score");
const bestText = document.getElementById("best");
const startBtn = document.getElementById("start");
const gameBox = document.getElementById("game");

const colors = ["green","red","yellow","blue"];
const sounds = {
    green: new Audio("https://s3.amazonaws.com/freecodecamp/simonSound1.mp3"),
    red: new Audio("https://s3.amazonaws.com/freecodecamp/simonSound2.mp3"),
    yellow: new Audio("https://s3.amazonaws.com/freecodecamp/simonSound3.mp3"),
    blue: new Audio("https://s3.amazonaws.com/freecodecamp/simonSound4.mp3")
};

let gameSeq = [];
let userSeq = [];
let level = 0;
let score = 0;
let best = localStorage.getItem("best") || 0;
let canClick = false;
let speed = 700;

bestText.textContent = `Best: ${best}`;

startBtn.onclick = startGame;

function startGame() {
    gameSeq = [];
    userSeq = [];
    level = 0;
    score = 0;
    speed = 700;
    startBtn.style.display = "none";
    nextLevel();
}

function nextLevel() {
    level++;
    userSeq = [];
    levelText.textContent = `Level: ${level}`;
    scoreText.textContent = `Score: ${score}`;
    speed = Math.max(300, speed - 40);

    gameSeq.push(colors[Math.floor(Math.random() * 4)]);
    playSequence();
}

function playSequence() {
    canClick = false;

    gameSeq.forEach((color, i) => {
        setTimeout(() => flash(color), i * speed);
    });

    setTimeout(() => canClick = true, gameSeq.length * speed);
}

function flash(color) {
    const pad = document.querySelector(`.${color}`);
    sounds[color].currentTime = 0;
    sounds[color].play();
    pad.classList.add("active");
    setTimeout(() => pad.classList.remove("active"), 250);
}

pads.forEach(pad => {
    pad.onclick = () => {
        if (!canClick) return;

        const color = pad.dataset.color;
        userSeq.push(color);
        flash(color);
        check(userSeq.length - 1);
    };
});

function check(i) {
    if (userSeq[i] !== gameSeq[i]) {
        gameOver();
        return;
    }

    score += 10;
    scoreText.textContent = `Score: ${score}`;

    if (userSeq.length === gameSeq.length) {
        setTimeout(nextLevel, 800);
    }
}

function gameOver() {
    gameBox.classList.add("shake");
    setTimeout(() => gameBox.classList.remove("shake"), 300);

    if (score > best) {
        best = score;
        localStorage.setItem("best", best);
        bestText.textContent = `Best: ${best}`;
    }

    startBtn.textContent = "RESTART";
    startBtn.style.display = "inline-block";
    canClick = false;
}
</script>

</body>
</html>
