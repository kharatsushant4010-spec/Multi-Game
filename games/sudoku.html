<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

 body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    position: relative;
    overflow: hidden;
}

body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('images/s1.jpeg');
    background-size: cover;
    background-position: center;
    filter: blur(10px);
    z-index: -1;
}

        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 18px;
            color: #555;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(9, 50px);
            grid-template-rows: repeat(9, 50px);
            gap: 0;
            border: 3px solid #333;
            margin: 0 auto;
            width: fit-content;
        }

        .cell {
            width: 50px;
            height: 50px;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            background: white;
            transition: background 0.2s;
        }

        .cell:hover:not(.fixed) {
            background: #e8f4f8;
        }

        .cell.selected {
            background: #bbdefb;
        }

        .cell.fixed {
            background: #f5f5f5;
            color: #333;
            cursor: default;
        }

        .cell.error {
            background: #ffcdd2;
            color: #c62828;
        }

        .cell.highlight {
            background: #fff9c4;
        }

        .cell:nth-child(3n):not(:nth-child(9n)) {
            border-right: 3px solid #333;
        }

        .cell:nth-child(n+19):nth-child(-n+27),
        .cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 3px solid #333;
        }

        .numbers {
            display: grid;
            grid-template-columns: repeat(9, 50px);
            gap: 10px;
            margin: 20px auto;
            width: fit-content;
        }

        .number-btn {
            width: 50px;
            height: 50px;
            font-size: 20px;
            font-weight: bold;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .number-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .new-game {
            background: #4caf50;
            color: white;
        }

        .new-game:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .check {
            background: #2196f3;
            color: white;
        }

        .check:hover {
            background: #0b7dda;
            transform: translateY(-2px);
        }

        .clear {
            background: #ff9800;
            color: white;
        }

        .clear:hover {
            background: #e68900;
            transform: translateY(-2px);
        }

        .message {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            min-height: 25px;
        }

        .success {
            color: #4caf50;
        }

        .error-msg {
            color: #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sudoku Game</h1>
        <div class="info">
            <div>Difficulty: <span id="difficulty">Medium</span></div>
            <div>Mistakes: <span id="mistakes">0</span></div>
        </div>
        <div class="grid" id="grid"></div>
        <div class="numbers" id="numbers"></div>
        <div class="buttons">
            <button class="new-game" onclick="newGame()">New Game</button>
            <button class="check" onclick="checkSolution()">Check</button>
            <button class="clear" onclick="clearCell()">Clear Cell</button>
        </div>
        <div class="message" id="message"></div>
    </div>

    <script>
        let grid = [];
        let solution = [];
        let selectedCell = null;
        let mistakes = 0;

        function createGrid() {
            const gridEl = document.getElementById('grid');
            gridEl.innerHTML = '';
            
            for (let i = 0; i < 81; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.onclick = () => selectCell(i);
                gridEl.appendChild(cell);
            }
        }

        function createNumberButtons() {
            const numbersEl = document.getElementById('numbers');
            numbersEl.innerHTML = '';
            
            for (let i = 1; i <= 9; i++) {
                const btn = document.createElement('button');
                btn.className = 'number-btn';
                btn.textContent = i;
                btn.onclick = () => placeNumber(i);
                numbersEl.appendChild(btn);
            }
        }

        function selectCell(index) {
            const cells = document.querySelectorAll('.cell');
            
            if (selectedCell !== null) {
                cells[selectedCell].classList.remove('selected');
            }
            
            selectedCell = index;
            cells[index].classList.add('selected');
            highlightRelated(index);
        }

        function highlightRelated(index) {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => cell.classList.remove('highlight'));
            
            const row = Math.floor(index / 9);
            const col = index % 9;
            const boxRow = Math.floor(row / 3) * 3;
            const boxCol = Math.floor(col / 3) * 3;
            
            for (let i = 0; i < 81; i++) {
                const r = Math.floor(i / 9);
                const c = i % 9;
                
                if (r === row || c === col || 
                    (r >= boxRow && r < boxRow + 3 && c >= boxCol && c < boxCol + 3)) {
                    if (i !== index) {
                        cells[i].classList.add('highlight');
                    }
                }
            }
        }

        function placeNumber(num) {
            if (selectedCell === null) {
                showMessage('Please select a cell first', 'error-msg');
                return;
            }
            
            const cells = document.querySelectorAll('.cell');
            const cell = cells[selectedCell];
            
            if (cell.classList.contains('fixed')) {
                showMessage('Cannot modify pre-filled cells', 'error-msg');
                return;
            }
            
            const row = Math.floor(selectedCell / 9);
            const col = selectedCell % 9;
            
            grid[row][col] = num;
            cell.textContent = num;
            cell.classList.remove('error');
            
            if (!isValidPlacement(row, col, num)) {
                cell.classList.add('error');
                mistakes++;
                document.getElementById('mistakes').textContent = mistakes;
                showMessage('Invalid placement!', 'error-msg');
            } else {
                showMessage('', '');
            }
        }

        function clearCell() {
            if (selectedCell === null) return;
            
            const cells = document.querySelectorAll('.cell');
            const cell = cells[selectedCell];
            
            if (cell.classList.contains('fixed')) {
                showMessage('Cannot clear pre-filled cells', 'error-msg');
                return;
            }
            
            const row = Math.floor(selectedCell / 9);
            const col = selectedCell % 9;
            
            grid[row][col] = 0;
            cell.textContent = '';
            cell.classList.remove('error');
            showMessage('', '');
        }

        function isValidPlacement(row, col, num) {
            for (let i = 0; i < 9; i++) {
                if (i !== col && grid[row][i] === num) return false;
                if (i !== row && grid[i][col] === num) return false;
            }
            
            const boxRow = Math.floor(row / 3) * 3;
            const boxCol = Math.floor(col / 3) * 3;
            
            for (let i = boxRow; i < boxRow + 3; i++) {
                for (let j = boxCol; j < boxCol + 3; j++) {
                    if (i !== row && j !== col && grid[i][j] === num) return false;
                }
            }
            
            return true;
        }

        function generateSudoku() {
            grid = Array(9).fill(0).map(() => Array(9).fill(0));
            solution = Array(9).fill(0).map(() => Array(9).fill(0));
            
            fillGrid(solution);
            
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    grid[i][j] = solution[i][j];
                }
            }
            
            const cellsToRemove = 40;
            let removed = 0;
            
            while (removed < cellsToRemove) {
                const row = Math.floor(Math.random() * 9);
                const col = Math.floor(Math.random() * 9);
                
                if (grid[row][col] !== 0) {
                    grid[row][col] = 0;
                    removed++;
                }
            }
        }

        function fillGrid(g) {
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (g[row][col] === 0) {
                        const numbers = [1,2,3,4,5,6,7,8,9].sort(() => Math.random() - 0.5);
                        
                        for (let num of numbers) {
                            if (isValid(g, row, col, num)) {
                                g[row][col] = num;
                                
                                if (fillGrid(g)) {
                                    return true;
                                }
                                
                                g[row][col] = 0;
                            }
                        }
                        
                        return false;
                    }
                }
            }
            return true;
        }

        function isValid(g, row, col, num) {
            for (let i = 0; i < 9; i++) {
                if (g[row][i] === num || g[i][col] === num) return false;
            }
            
            const boxRow = Math.floor(row / 3) * 3;
            const boxCol = Math.floor(col / 3) * 3;
            
            for (let i = boxRow; i < boxRow + 3; i++) {
                for (let j = boxCol; j < boxCol + 3; j++) {
                    if (g[i][j] === num) return false;
                }
            }
            
            return true;
        }

        function renderGrid() {
            const cells = document.querySelectorAll('.cell');
            
            for (let i = 0; i < 81; i++) {
                const row = Math.floor(i / 9);
                const col = i % 9;
                const cell = cells[i];
                
                if (grid[row][col] !== 0) {
                    cell.textContent = grid[row][col];
                    cell.classList.add('fixed');
                } else {
                    cell.textContent = '';
                    cell.classList.remove('fixed');
                }
                
                cell.classList.remove('error', 'selected', 'highlight');
            }
            
            selectedCell = null;
        }

        function checkSolution() {
            let complete = true;
            let correct = true;
            
            const cells = document.querySelectorAll('.cell');
            
            for (let i = 0; i < 81; i++) {
                const row = Math.floor(i / 9);
                const col = i % 9;
                
                if (grid[row][col] === 0) {
                    complete = false;
                } else if (grid[row][col] !== solution[row][col]) {
                    correct = false;
                    cells[i].classList.add('error');
                }
            }
            
            if (complete && correct) {
                showMessage('ðŸŽ‰ Congratulations! You solved it!', 'success');
            } else if (!complete) {
                showMessage('Puzzle is not complete yet', 'error-msg');
            } else {
                showMessage('There are some errors. Keep trying!', 'error-msg');
            }
        }

        function newGame() {
            mistakes = 0;
            document.getElementById('mistakes').textContent = mistakes;
            generateSudoku();
            renderGrid();
            showMessage('', '');
        }

        function showMessage(msg, className) {
            const msgEl = document.getElementById('message');
            msgEl.textContent = msg;
            msgEl.className = 'message ' + className;
        }

        document.addEventListener('keydown', (e) => {
            if (selectedCell !== null && e.key >= '1' && e.key <= '9') {
                placeNumber(parseInt(e.key));
            } else if (e.key === 'Backspace' || e.key === 'Delete') {
                clearCell();
            }
        });

        createGrid();
        createNumberButtons();
        newGame();
    </script>
</body>
</html>