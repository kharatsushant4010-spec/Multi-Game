<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GameZone Chess</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("images/chess.avif")
  center/cover no-repeat;
}

/* Glass container */
.blur{
  backdrop-filter: blur(16px);
  background: linear-gradient(
    135deg,
    rgba(255,255,255,0.18),
    rgba(255,255,255,0.06)
  );
  padding:30px;          /* ⬆ increased */
  border-radius:26px;
  box-shadow:0 35px 70px rgba(0,0,0,.65);
}


.container{
    display:flex;
    gap:30px;
    position:relative;
}
#board{
    display:grid;
    grid-template-columns:repeat(8,70px);
    grid-template-rows:repeat(8,70px);
    border:4px solid #facc15;
    position:relative;
}
.square{
    width:70px;
    height:70px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:40px;
    cursor:pointer;
}
.light{background:#f1f5f9; color:#000;}
.dark{background:#475569;}
.selected{outline:3px solid #22c55e;}
.controls{
    min-width:200px;
}
button{
    width:100%;
    padding:12px;
    margin-bottom:10px;
    border:none;
    border-radius:8px;
    background:#facc15;
    font-size:16px;
    cursor:pointer;
}
.status{
    margin-top:10px;
    font-size:14px;
}
/* Watermark */
.watermark{
    position:absolute;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:64px;
    font-weight:bold;
    color:rgba(255,255,255,0.08);
    pointer-events:none;
    transform:rotate(-30deg);
    user-select:none;
}
</style>
</head>
<body>
<div class="container">
    <div id="board">
    <div class="watermark">SUSHANT</div>
</div>
    <div class="controls">
        <button onclick="startTwoPlayer()">Two Player</button>
        <button onclick="startBot()">Single Player (Bot)</button>
        <button onclick="resetGame()">Reset</button>
        <div class="status" id="status">Select Mode</div>
    </div>
</div>

<script>
const pieces = {
    r:'♜', n:'♞', b:'♝', q:'♛', k:'♚', p:'♟',
    R:'♖', N:'♘', B:'♗', Q:'♕', K:'♔', P:'♙'
};

let board, selected=null, turn='white', mode='none';

function initialBoard(){
return [
['r','n','b','q','k','b','n','r'],
['p','p','p','p','p','p','p','p'],
['','','','','','','',''],
['','','','','','','',''],
['','','','','','','',''],
['','','','','','','',''],
['P','P','P','P','P','P','P','P'],
['R','N','B','Q','K','B','N','R']
];}

function drawBoard(){
const b=document.getElementById('board');
b.innerHTML='';
for(let r=0;r<8;r++){
 for(let c=0;c<8;c++){
  const sq=document.createElement('div');
  sq.className='square '+((r+c)%2==0?'light':'dark');
  sq.dataset.r=r; sq.dataset.c=c;
  sq.onclick=()=>clickSquare(r,c,sq);
  if(board[r][c]) sq.textContent=pieces[board[r][c]];
  b.appendChild(sq);
 }
}
}

function clickSquare(r,c,sq){
 if(!mode) return;
 const piece=board[r][c];
 if(selected){
    if(movePiece(selected.r,selected.c,r,c)){
        turn=turn==='white'?'black':'white';
        updateStatus();
        drawBoard();
        selected=null;
        if(mode==='bot' && turn==='black') setTimeout(botMove,400);
    } else selected=null;
 } else if(piece && isOwn(piece)){
    selected={r,c};
    sq.classList.add('selected');
 }
}

function isOwn(p){ return turn==='white'?p===p.toUpperCase():p===p.toLowerCase(); }

function movePiece(sr,sc,dr,dc){
 const p=board[sr][sc];
 if(!validMove(p,sr,sc,dr,dc)) return false;
 const captured = board[dr][dc];
 board[dr][dc]=p;
 board[sr][sc]='';
 // prevent illegal move leaving king in check
 if(isInCheck(turn)){
   board[sr][sc]=p;
   board[dr][dc]=captured;
   return false;
 }
 // checkmate detection
 const opponent = turn==='white'?'black':'white';
 if(isInCheck(opponent) && !hasLegalMoves(opponent)){
   setTimeout(()=>alert(`Checkmate! ${turn} wins.`),100);
   mode='none';
 }
 return true;
}

function validMove(p,sr,sc,dr,dc){
 if(sr===dr && sc===dc) return false;
 const target=board[dr][dc];
 if(target && (target===target.toUpperCase())==(p===p.toUpperCase())) return false;
 const dir=p==='P'?-1:p==='p'?1:0;
 switch(p.toLowerCase()){
 case 'p':
  if(sc===dc && !target){
    if(dr-sr===dir) return true;
    if((sr===6 && p==='P'||sr===1&&p==='p') && dr-sr===2*dir && !board[sr+dir][sc]) return true;
  }
  if(Math.abs(dc-sc)===1 && dr-sr===dir && target) return true;
  return false;
 case 'r': return clearLine(sr,sc,dr,dc);
 case 'b': return Math.abs(dr-sr)===Math.abs(dc-sc)&&clearDiag(sr,sc,dr,dc);
 case 'q': return clearLine(sr,sc,dr,dc)|| (Math.abs(dr-sr)===Math.abs(dc-sc)&&clearDiag(sr,sc,dr,dc));
 case 'n': return Math.abs(dr-sr)*Math.abs(dc-sc)===2;
 case 'k': return Math.abs(dr-sr)<=1 && Math.abs(dc-sc)<=1;
 }
 return false;
}

function clearLine(sr,sc,dr,dc){
 if(sr!==dr && sc!==dc) return false;
 const rStep=dr>sr?1:dr<sr?-1:0;
 const cStep=dc>sc?1:dc<sc?-1:0;
 let r=sr+rStep,c=sc+cStep;
 while(r!==dr||c!==dc){ if(board[r][c]) return false; r+=rStep; c+=cStep; }
 return true;
}
function clearDiag(sr,sc,dr,dc){
 const rStep=dr>sr?1:-1, cStep=dc>sc?1:-1;
 let r=sr+rStep,c=sc+cStep;
 while(r!==dr){ if(board[r][c]) return false; r+=rStep; c+=cStep; }
 return true;
}

function botMove(){
 let moves=[];
 for(let r=0;r<8;r++)for(let c=0;c<8;c++){
  const p=board[r][c];
  if(p && p===p.toLowerCase()){
    for(let r2=0;r2<8;r2++)for(let c2=0;c2<8;c2++){
      if(validMove(p,r,c,r2,c2)) moves.push({r,c,r2,c2});
    }
  }
 }
 if(moves.length){
  const m=moves[Math.floor(Math.random()*moves.length)];
  board[m.r2][m.c2]=board[m.r][m.c];
  board[m.r][m.c]='';
  turn='white'; drawBoard(); updateStatus();
 }
}

function startTwoPlayer(){ mode='two'; resetGame(); }
function startBot(){ mode='bot'; resetGame(); }
function resetGame(){ board=initialBoard(); turn='white'; drawBoard(); updateStatus(); }
function updateStatus(){ document.getElementById('status').textContent=`Turn: ${turn}`; }

function isInCheck(color){
 let kr,kc;
 for(let r=0;r<8;r++)for(let c=0;c<8;c++){
  if(board[r][c]===(color==='white'?'K':'k')){kr=r;kc=c;}
 }
 for(let r=0;r<8;r++)for(let c=0;c<8;c++){
  const p=board[r][c];
  if(p && (p===p.toUpperCase())!=(color==='white')){
    if(validMove(p,r,c,kr,kc)) return true;
  }
 }
 return false;
}

function hasLegalMoves(color){
 for(let r=0;r<8;r++)for(let c=0;c<8;c++){
  const p=board[r][c];
  if(p && (p===p.toUpperCase())==(color==='white')){
    for(let r2=0;r2<8;r2++)for(let c2=0;c2<8;c2++){
      const save=board[r2][c2];
      if(validMove(p,r,c,r2,c2)){
        board[r2][c2]=p; board[r][c]='';
        const safe=!isInCheck(color);
        board[r][c]=p; board[r2][c2]=save;
        if(safe) return true;
      }
    }
  }
 }
 return false;
}

board=initialBoard(); drawBoard();
</script>
</body>
</html>
